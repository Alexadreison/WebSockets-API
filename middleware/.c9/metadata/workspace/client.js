{"filter":false,"title":"client.js","tooltip":"/client.js","undoManager":{"stack":[[{"start":{"row":0,"column":0},"end":{"row":153,"column":13},"action":"insert","lines":["<script>","    ","      var client,watch,name,centerPos;","      ","      var tempLang = 0;","      ","      var tempLong = 0;","      ","      $(document).ready(function(){","        ","        $(\"#start\").click(function() {","          ","          function showPosition(position) {","            ","            if ( tempLang != position.coords.latitude || tempLong != position.coords.longitude ) {","            ","                var ev;","            ","                if (centerPos) {                                  // first time specify center coordinates","              ","                  ev = {eventName : 'newPositionCenter', data : { langitude : position.coords.latitude, longitude : position.coords.longitude, time : position.timestamp } };","    ","                  client.sendEvent(ev);","              ","                  centerPos = false;","                }","              ","                ev = {eventName : 'newPosition', data : {clientName : name, langitude : position.coords.latitude , longitude : position.coords.longitude , time : position.timestamp }};","    ","                client.sendEvent(ev);","              ","                tempLang = position.coords.latitude;","              ","                tempLong = position.coords.longitude;","                ","                var day = new Date(position.timestamp);","                ","                var hours = day.getHours();","                ","                var minutes = ( day.getMinutes() < 10 ? '0' : '' ) + day.getMinutes();","                ","                var seconds = ( day.getSeconds() < 10 ? '0' : '' ) + day.getSeconds();","                ","                var newEl = document.createElement('span');","              ","                newEl.style.color = '#ff0000';","              ","                var newContent = document.createTextNode(\"Latitude: \" + position.coords.latitude + \" ,Longitude: \" + position.coords.longitude + ' ,Time: ' + hours +':'+minutes+':'+seconds);","              ","                newEl.appendChild(newContent);","              ","                var br = document.createElement('br');","              ","                newEl.appendChild(br);","              ","                document.getElementById(\"positions\").appendChild(newEl);","              }","              ","            }","            ","    ","            function showError(error) {","              ","              var x = document.getElementById(\"positions\");","","              switch(error.code) {","              ","                case error.PERMISSION_DENIED :","                ","                  x.innerHTML = \"User denied the request for Geolocation.\";","                ","                  break;","        ","                case error.POSITION_UNAVAILABLE :","                ","                  x.innerHTML = \"Location information is unavailable.\";","                ","                  break;","                ","                case error.TIMEOUT :","            ","                  x.innerHTML = \"The request to get user location timed out.\";","            ","                  break;","                ","                case error.UNKNOWN_ERROR :","                ","                  x.innerHTML = \"An unknown error occurred.\";","              }","            }","          ","          if ( name != '' ) {","          ","            client = new io();","","            client.clientName(name);","","            client.newConnection('https://mynodejs-alexanderuser.c9.io');","      ","    ","            var ev = {eventName : 'newClient', data : name};","  ","            client.sendEvent(ev);","","            centerPos = true;","","            var options = { enableHighAccuracy: false, timeout: 40000, maximumAge: 0 };","        ","            if (navigator.geolocation) {","            ","              watch = navigator.geolocation.watchPosition(showPosition,showError, options);","              ","            }","            else {","              ","              var x = document.getElementById(\"positions\");","","              x.innerHTML = \"Geolocation is not supported by this browser.\";","            }","            ","          }","          else {","            ","            document.getElementById(\"notice\").innerHTML = \"You must define a name for your mobile device\";","          }","     ","        });","        ","        ","        $(\"#sendName\").click(function() {","            ","            var val = document.getElementById(\"devName\").value;","            ","            if ( val != '' ) {","              ","              name = val;","              ","              document.getElementById(\"user\").style.display = \"none\";","            }","            ","            document.getElementById(\"notice\").innerHTML = \"You must define a name for your mobile device\";","        });","        ","        ","        $(\"#stop\").click(function() {","            ","            navigator.geolocation.clearWatch(watch);","            ","            client.close();","        });","        ","      });","      ","    </script>"],"id":1}],[{"start":{"row":153,"column":12},"end":{"row":153,"column":13},"action":"remove","lines":[">"],"id":2}],[{"start":{"row":153,"column":11},"end":{"row":153,"column":12},"action":"remove","lines":["t"],"id":3}],[{"start":{"row":153,"column":10},"end":{"row":153,"column":11},"action":"remove","lines":["p"],"id":4}],[{"start":{"row":153,"column":9},"end":{"row":153,"column":10},"action":"remove","lines":["i"],"id":5},{"start":{"row":153,"column":8},"end":{"row":153,"column":9},"action":"remove","lines":["r"]}],[{"start":{"row":153,"column":7},"end":{"row":153,"column":8},"action":"remove","lines":["c"],"id":6}],[{"start":{"row":153,"column":6},"end":{"row":153,"column":7},"action":"remove","lines":["s"],"id":7}],[{"start":{"row":153,"column":5},"end":{"row":153,"column":6},"action":"remove","lines":["/"],"id":8}],[{"start":{"row":153,"column":4},"end":{"row":153,"column":5},"action":"remove","lines":["<"],"id":9}],[{"start":{"row":153,"column":2},"end":{"row":153,"column":4},"action":"remove","lines":["  "],"id":10}],[{"start":{"row":153,"column":0},"end":{"row":153,"column":2},"action":"remove","lines":["  "],"id":11}],[{"start":{"row":152,"column":6},"end":{"row":153,"column":0},"action":"remove","lines":["",""],"id":12}],[{"start":{"row":152,"column":4},"end":{"row":152,"column":6},"action":"remove","lines":["  "],"id":13}],[{"start":{"row":152,"column":2},"end":{"row":152,"column":4},"action":"remove","lines":["  "],"id":14}],[{"start":{"row":152,"column":0},"end":{"row":152,"column":2},"action":"remove","lines":["  "],"id":15}],[{"start":{"row":151,"column":9},"end":{"row":152,"column":0},"action":"remove","lines":["",""],"id":16}],[{"start":{"row":0,"column":7},"end":{"row":0,"column":8},"action":"remove","lines":[">"],"id":17}],[{"start":{"row":0,"column":6},"end":{"row":0,"column":7},"action":"remove","lines":["t"],"id":18}],[{"start":{"row":0,"column":5},"end":{"row":0,"column":6},"action":"remove","lines":["p"],"id":19}],[{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"remove","lines":["i"],"id":20}],[{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"remove","lines":["r"],"id":21}],[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"remove","lines":["c"],"id":22}],[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"remove","lines":["s"],"id":23}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"remove","lines":["<"],"id":24}]],"mark":23,"position":23},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":0,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1431944105052,"hash":"73cdeab595859e4ee7223f5d721997234864bc5a"}